# Feature Specification: Padel Host App (MVP)

**Feature Branch**: `001-padel-host-app-mvp`  
**Created**: 2026-02-25  
**Status**: Draft  
**Input**: User description: "Padel Host App â€” Event Hosting (MVP)"

## User Scenarios & Testing (mandatory)

### User Story 1 - Create and Start Event (Priority: P1)

As a host, I create an event, select mode/date/courts, add players, preview details, and start round 1.

**Why this priority**: This is the entry point for all event execution.

**Independent Test**: Create event with 8 players and 2 courts and verify round 1 assignments are persisted.

**Acceptance Scenarios**:

1. **Given** valid event input, **When** host creates event, **Then** event is stored with status `Lobby` and selected courts/players.
2. **Given** event has enough players, **When** host starts event, **Then** status becomes `Running` and round 1 matches are generated.

---

### User Story 2 - Run Rounds and Enter Results (Priority: P1)

As a host, I enter per-court results and advance rounds when all matches are complete.

**Why this priority**: Core runtime workflow during live events.

**Independent Test**: Complete one full round in each mode and verify scoring + next round generation.

**Acceptance Scenarios**:

1. **Given** current round matches, **When** host records results, **Then** match status becomes completed and player scores are updated.
2. **Given** all matches complete, **When** host advances round, **Then** next round assignments are generated by mode rules.

---

### User Story 3 - Finish Event and Review Summary (Priority: P2)

As a host, I finish the event and view standings and full match history.

**Why this priority**: Provides closure and auditability for completed events.

**Independent Test**: Complete all rounds and verify summary includes rankings, per-round results, and all matches.

**Acceptance Scenarios**:

1. **Given** final round complete, **When** host clicks Finish Event, **Then** event status becomes `Finished` and final standings are stored.
2. **Given** Beat the Box event, **When** event finishes, **Then** global ranking updates persist across events.

### Edge Cases

- Players not divisible by 4.
- Selected courts exceed playable matches.
- Mexicano scores not summing to 24.
- Attempt to advance with incomplete results.
- Duplicate player added to same event.

### Canonical Clarifications

- All entity identifiers use backend-generated UUIDv4 values.
- No bigint or auto-increment identifiers are allowed.
- API serializes all IDs as string UUIDs.
- Backend event statuses are exactly: `Lobby`, `Running`, `Finished`.
- `Preview` is a frontend-only step between create and start; it is not persisted as backend status.
- Canonical result endpoint is `POST /matches/{matchId}/result`.

## Requirements (mandatory)

### Functional Requirements

- **FR-001**: System MUST support event types `Americano`, `Mexicano`, `BeatTheBox`.
- **FR-002**: System MUST create events with name, type, date, selected courts (subset of 7).
- **FR-003**: System MUST allow adding existing players and creating new players.
- **FR-004**: System MUST generate and persist rounds/matches/court assignments per mode.
- **FR-005**: System MUST support mode-specific result input:
  - Americano: winning team
  - Mexicano: team scores totaling 24
  - BeatTheBox: win/loss/draw
- **FR-006**: System MUST update round and event scores after each result.
- **FR-007**: System MUST prevent advancing round until all current matches are completed.
- **FR-008**: System MUST stop at fixed rounds (6 for Americano/Mexicano, 3 for BeatTheBox).
- **FR-009**: System MUST persist event metadata, rounds, matches, teams, and results.
- **FR-010**: System MUST persist per-round and total event scores.
- **FR-011**: BeatTheBox MUST update persistent global ranking (+25/-15/+5).
- **FR-012**: Backend MUST be exposed as REST API for future multi-user expansion.
- **FR-013**: Frontend MUST provide host-first screens: Lobby, Preview, Running, Summary.
- **FR-014**: Backend MUST generate UUIDv4 identifiers for all entities and expose them as string UUIDs in API payloads.
- **FR-015**: Backend MUST enforce event status domain to exactly `Lobby`, `Running`, `Finished`.
- **FR-016**: Match result submission MUST use canonical endpoint `POST /matches/{matchId}/result`.

### Key Entities

- **Player**: person, unique identity, persistent global ranking score.
- **Event**: name/type/date/backend status (`Lobby|Running|Finished`)/current round, selected courts.
- **EventPlayer**: event-to-player relation.
- **Round**: numbered phase within event.
- **Match**: round+court pairing, result fields.
- **MatchTeam**: players grouped into team 1/team 2.
- **PlayerRoundScore**: per-player score per round.
- **PlayerEventScore**: per-player total and placement per event.

## Backend Status Canon

- Persisted backend statuses: `Lobby`, `Running`, `Finished`.
- `Preview` remains a frontend screen/state only.

## Success Criteria (mandatory)

### Measurable Outcomes

- **SC-001**: Host can create and start an event in <= 2 minutes.
- **SC-002**: Each mode can be completed end-to-end without direct DB edits.
- **SC-003**: 100% of entered results appear in summary/history.
- **SC-004**: BeatTheBox ranking changes are visible in subsequent events.
